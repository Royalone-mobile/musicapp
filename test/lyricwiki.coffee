getFileByHTTP = require('./utils').getFileByHTTP
chai = require "chai"
expect = chai.expect
describe 'THE WEBSITE LYRICWIKI', ->
      LW = require '../lib/lyricwiki'
      lw = new LW()
      song = {}
      describe 'A song"', ->
            it 'should be called "Is The World Strange?" by "Cosmo Jarvis" ',(done) ->
                  lw.connect()
                  id = 1125631
                  link = "http://lyrics.wikia.com/Cosmo_Jarvis:Is_The_World_Strange%3F"
                  getFileByHTTP link, (data)->
                        options = 
                              id : id
                        song = lw.processSongLyric data,options
                        # console.log song
                        expect(song.album).to.equal("Is The World Strange Or Am I Strange (2011)")
                        expect(song.language).to.equal("English")
                        expect(song.download_done).to.equal(1)
                        lyric = """
Is the world strange, or am I strange?<br />Is the world strange, or am I?<br />Is the world mean, or am I mean?<br />Guess I won\'t know \'til I die<br /><br />Everyone I know, I don\'t wanna see you anymore<br />I don\'t even know what I know you for<br />All I know is that you made me feel abnormal<br />And mostly always, all day, as kids when we played<br />I still felt like I had to try to be OK with you<br /><br />And truly, I wanted you to like me<br />Not spite me without explanation unrightly<br />But even as a kid my heart\'s what I hid<br />\'Cause something about it and this planet don\'t fit<br /><br />I could never build relationships the way you did<br />So you were only friends with what I pretended<br />Every day, every minute, and now I\'m stuck so far in it<br />This game will mean death for me if I don\'t win it<br /><br />I\'m a coward, a deserter<br />An anonymous flirter<br />I had me a woman but my bullshit just hurt her<br /><br />Very much the same, when I was at school<br />Felt like I was from a junk gene pool<br />Created to be confused, should never have to choose<br />Between what I am, and what the world understands<br />But if I never did I would be more isolated<br />But sure I\'d be hated, so it\'s way better if I fake it<br />Fake me, fake these words<br />I\'m sick of polishing this turd<br />For this proud little planet, that can\'t understand it<br />But really, it\'s clearly my fucked mind that\'s had it<br />I tried, don\'t know why, but myself was no help<br />People saw shit inside me<br />It\'s clear that they felt it wasn\'t their job to comprehend<br />So I began learning them, to spare them the expense<br />I began my descent to the future<br /><br />Time here\'s not like when you\'re 8<br />It\'s real, like mistakes I just realized I made<br />Like thinking people are worth having to suffer<br />Painting over yourself in their favourite colour<br />Or maybe I\'m just a clock with no real face<br />Who tried to tick-tock but could not find a pace<br /><br />Is the world strange, or am I strange?<br />Is the world strange or am I?<br />Is the world mean, or am I mean?<br />Guess I won\'t know \'til I die<br /><br />Is the world dead, or am I dead?<br />Is the world dead, or am I?<br />Is the world fucked, or am I fucked?<br />Guess I won\'t know, \'til I die<br /><br />And I wished you would be harsh to me<br />And explain to my face every fault you could see<br />Instead you were silent, yes, you let me be<br />To continue the search for what mask you could treat<br />Like a motherfucking normal human being<br />Other kids in your club didn\'t have masks to bring<br />They didn\'t act different, and that was sufficient<br />For them to receive all your trust that I didn\'t<br /><br />That\'s why I can\'t care now about you lot<br />\'Cause from the beginning you never said "get lost"<br />You never said "fuck off, Cos\', take that brave mask off<br />We as a world have decided you\'re just not what we\'re looking for<br />In a long time acquaintance, we don\'t like hearing<br />Your emotionless statements<br />And your \'I can\'t play ball with the world\' conversations<br />Kill yourself now so in the future we\'re free<br />From your songs about fucked up personality"<br /><br />I always prayed that you would punch me in the face<br />And shout "you are a waste of space, get out, my family say you can\'t come \'round"<br />Wanted everyone more than they ever wanted me<br />I worked for them, worked for their company<br />\'Cause it wasn\'t really me they befriended, extended friendly courtesy<br />It was whatever mask that I wore<br />That applied to their sort<br />That applied to them so much they\'d answer the door<br />When I knocked after school with my trusty skateboard<br /><br />And I\'m paying for it now<br />I\'m a rain filled cloud that can\'t drop the huge storm it allowed<br />To build up inside it, no not a single drip<br />I can never get rid of what makes me a dick<br />I\'d say sorry, but it\'s not my fault I exist<br />So just kiss my ass people<br />I\'m glad you won\'t miss me when I\'m gone<br />I don\'t want to be in your history<br />It\'s just best to forget me<br />Even if you liked me you still never met me<br /><br />Is the world strange, or am I strange?<br />Is the world strange, or am I?<br />Is the world mean, or am I mean?<br />Guess I won\'t know, \'til I die<br /><br />Is the world dead, or am I dead?<br />Is the world dead or am I?<br />Is the world fucked, or am I fucked?<br />Guess I won\'t know \'til I die<br /><br />Is the world strange, or am I strange?<br />Is the world strange, or am I?<br />Is the world mean, or am I mean?<br />Guess I won\'t know \'til I die<br /><br />Is the world dead, or am I dead?<br />Is the world dead, or am I?<br />Is the world fucked, or am I fucked?<br />Guess I won\'t know \'til I die
                        """
                        expect(song.lyric).to.equal(lyric)
                        done()
      describe 'A song (with gracenote) "', ->
            it 'should be called "Is The World Strange?" by "Cosmo Jarvis" ',(done) ->
                  lw.connect()
                  id = 1125631
                  link = "http://lyrics.wikia.com/Gracenote:B.G.:True_Story"
                  getFileByHTTP link, (data)->
                        options = 
                              id : id
                        song = lw.processGraceNoteSongLyric data,options
                        # console.log song
                        expect(song.gracenote_songwriters).to.equal("Dorsey, Christopher Noel; Thomas, Bryon O")
                        expect(song.gracenote_publishers).to.equal("MONEY MACK MUSIC")
                        expect(song.download_gracenote_done).to.equal(1)
                        expect(song.download_gracenote_done).to.equal(1)
                        lyric = """
Right now we got a lil' youngsta<br />Lil' Doogie from the B.G.'z<br />Do what'cha gotta do mane<br />Say what'cha gotta say, Wayne<br /><br />The rhymes you are about to hear are true<br />This some true shit<br /><br />Shoulda killed you bitches when we heard that song<br />Tipped it on, talkin' 'bout 6th and Baronne<br />When the fuckin' lights on up early in the mornin'<br />All that muthafuckin' creepin'<br />Pissin' on the set when a nigga Dee, sleepin'<br /><br />Pussy ass, you know you can't survive<br />You was creepin' through that third you must don't know it's do or die<br />Now that nigga on my list<br />A p-poppin' bitch no disresp', p-poppin' bitch no disresp'<br />P-poppin', p-poppin', p-poppin', bitch no disrespect to the tenth<br /><br />But there's a pussy in your face and they can suck and dick<br />Ridin' and slidin' with all that workin' and twerkin'<br />You can't be no "G", 'cuz a "G" not down wit' jerkin'<br />Them niggas always comin' with that play<br />You want some real drama, why don't you bring that shit our way?<br /><br />'Cuz I'm a Baby Gangsta down for that street funk<br />Stuntin' in a concert, take it to the fuckin' trunk<br />Talkin' all that bullshit, talkin' all that shit on wax<br />Talkin' all that yak-yak, but I'ma split your Kool-Aid pack, bitch<br />I got my pistol close at hand, this for the real, real pussies in the can<br /><br />The rhymes you are about to hear are true<br />This some true shit<br /><br />Chuck fuckin' them niggas at night<br />They doin' bad and slangin' rhymes at the same time, ain't lyin'<br />Now this nigga is a muthafuckin' dick beater<br />Heard at Corn[unverified] he was a muthafuckin' cheerleader<br /><br />Fuckin' wit a B.G., best believe you will get served<br />I'ma leavin' ya muthafuckin' thinking cap on the curb<br />Chuck got some mail? 'Cuz oh, yes, I'm comin' to get'cha<br />And if I don't get 20 G's, I'ma split'cha<br /><br />I'm a murderer, server, nigga come try to test<br />Had to put'em to rest, no vest but one to the chest<br />But uh, you know you done fucked up don't cha?<br />Like Yella said, you mad 'cuz Ca$h Money didn't want'cha<br /><br />Let's move across that water strapped with that A.K.<br />They got some wannabe crips, wanna bang, go to L.A.<br />Now you can claim, the East, North, West, or South<br />Mystikal fool, you can pump this dick right in your mouth<br /><br />Them niggas be rappin', very much trippin'<br />Talkin' all that nonsense, slippin' talkin' bout they be crippin'<br />But it's like this, watch out before you get bucked<br />I'm tellin' coward ass niggas to raise up, raise up, raise up<br /><br />At first he was a cheerleader now he ain't that nigga to fuck wit<br />That goes to show you studio yeah that nigga buck quick<br />You duck sick when I catch'cha, you best to start to runnin'<br />Cuz I'm comin', start duckin', cuz I'm bustin' and pluckin', fuck it<br /><br />Chuck, you big trick, you hoe bitch<br />Puttin' stank hoes in apartments and shit<br />And ummm, them niggas who help you get the money<br />You straight fuck 'em<br />When check time come, they gets nothin', you pluck 'em<br /><br />And y'all hoes for lettin' him take it, hard rolled and fake it<br />Niggas best to look like skatin'<br />Now back to this muthafuckin' Mystikal, bitch<br />You wanna jump on a nigga like a morphodyke come jump on the dick<br /><br />That's enough of this hoe shit on the real<br />If you don't spit "G" shit with skillz you can't pay bills I make mils<br />I close the shop for them niggas wanna shine<br />Sign on my nine when I put it on your mind into your spine<br /><br />Don't whine, niggas can't handle me not hard<br />I'm the bitch who came to fuck up the party<br />When I catch'cha I'ma kill ya don't worry<br />This is another part of that fuckin' true story<br /><br />Partners you bet not do no crime, get no time and go to jail<br />Cuz in that two man cell, best believe you gone get nailed<br />Mystikal you'z a hoe, it's time I let'cha know<br />Y'all ain't ready for Local five, got a boot camp fulla hoes<br /><br />I'm gat totin', ready to leave your heart open<br />Bullets floatin', hot nine chambers smokin'<br />Uptown, ya bound to get y'all wig split<br />Y'all represent a 17th set that don't even exist<br /><br />Now that's a shame, you reppin' just to get a name<br />You can't survive in this game 'cuz you niggas lame<br />I'm ready to take it to some "G" shit, street shit<br />Where caps get peeled and wigs bound to get split<br /><br />I'm off Valence, ain't no doubt this B.G. ain't real<br />I'm bout to hiccup some bullets out my fuckin' steel<br />Peel, make niggas kneel, bow down<br />From this clown that's gonna put you six in the ground<br /><br />It's time a nigga put Big Boy where the fuck they belong<br />Rollin' wit' tec-9 best believe it's on<br />Raise up, raise up, raise up, raise up, raise up
                        """
                        expect(song.gracenote_lyric).to.equal(lyric)
                        done()
